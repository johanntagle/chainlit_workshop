# Product Requirements Document (PRD)
## Chainlit Customer Support Workshop - Progressive Code Examples

**Project Goal:** Create a series of progressive Python scripts for a 1.5-hour workshop teaching developers how to build a client-ready customer support chat agent using Chainlit.

**Target Audience:** Python developers who want to build AI automation solutions for local business clients.

**Deliverable:** A complete workshop repository with numbered scripts that build upon each other, sample business data, and utility scripts for setup.

---

## Project Structure

```
chainlit-workshop/
â”œâ”€â”€ README.md
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ .env.example
â”œâ”€â”€ .python-version
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ 01_bare_minimum_chatbot.py
â”‚   â”œâ”€â”€ 02_with_system_prompt.py
â”‚   â”œâ”€â”€ 03a_input_guardrails.py
â”‚   â”œâ”€â”€ 03b_output_guardrails.py
â”‚   â”œâ”€â”€ 04a_tools_availability.py
â”‚   â”œâ”€â”€ 04b_tools_reservation.py
â”‚   â”œâ”€â”€ 04c_tools_menu_business.py
â”‚   â”œâ”€â”€ 05_rag_basic.py
â”‚   â”œâ”€â”€ 06_final_polished.py
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ setup_vectordb.py
â”‚       â”œâ”€â”€ test_queries.py
â”‚       â””â”€â”€ validate_setup.py
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ restaurant/
â”‚   â”‚   â”œâ”€â”€ menu.json
â”‚   â”‚   â”œâ”€â”€ faq.md
â”‚   â”‚   â”œâ”€â”€ catering.md
â”‚   â”‚   â”œâ”€â”€ wine_list.md
â”‚   â”‚   â””â”€â”€ business_info.json
â”‚   â””â”€â”€ embeddings/
â”‚       â””â”€â”€ (generated by setup script)
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ bella_logo.png
â”‚   â””â”€â”€ conversation_examples.md
â””â”€â”€ docs/
    â”œâ”€â”€ WORKSHOP_GUIDE.md
    â”œâ”€â”€ CLIENT_PITCH_TEMPLATE.md
    â””â”€â”€ PRODUCTION_CHECKLIST.md
```

---

## Technical Requirements

### Core Dependencies
- **Python:** 3.9+
- **Package Manager:** uv
- **Framework:** chainlit
- **LLM Provider:** OpenAI (GPT-4 or GPT-3.5-turbo)
- **Vector DB:** chromadb
- **Embeddings:** sentence-transformers or OpenAI embeddings

### Dependencies to Include in pyproject.toml
```toml
[project]
name = "chainlit-workshop"
version = "0.1.0"
description = "Workshop materials for building customer support agents with Chainlit"
requires-python = ">=3.9"
dependencies = [
    "chainlit>=1.0.0",
    "openai>=1.0.0",
    "python-dotenv>=1.0.0",
    "chromadb>=0.4.0",
    "langchain>=0.1.0",
    "langchain-openai>=0.0.5",
    "sentence-transformers>=2.2.0",
    "pydantic>=2.0.0",
]
```

### Environment Variables (.env.example)
```
OPENAI_API_KEY=your_openai_api_key_here
CHAINLIT_AUTH_SECRET=your_secret_here
```

---

## Script Specifications

### 01_bare_minimum_chatbot.py
**Purpose:** Absolute minimum working Chainlit chatbot

**Requirements:**
- Import chainlit
- Create `@cl.on_message` handler
- Connect to OpenAI (use `openai` library directly, no langchain)
- Echo back user messages with a simple LLM response
- No streaming required at this stage
- Minimal code - under 20 lines

**Key Learning:** "This is how easy it is to get started"

**Example interaction:**
```
User: Hello
Bot: Hello! How can I help you today?
```

---

### 02_with_system_prompt.py
**Purpose:** Add personality and business context

**Requirements:**
- Build on script 01
- Add system prompt for "Bella's Italian Restaurant"
- System prompt should include:
  - Restaurant name and role
  - Business hours (Tuesday-Sunday, 11am-10pm, closed Mondays)
  - Tone guidance (warm, welcoming, Italian restaurant host)
  - Basic offerings (dine-in, takeout, catering)
- Add `@cl.on_chat_start` handler with welcome message
- Implement basic conversation memory (maintain message history)
- Add streaming for better UX

**System Prompt Template:**
```
You are the AI assistant for Bella's Italian Restaurant, a family-owned Italian restaurant.

BUSINESS INFORMATION:
- Hours: Tuesday-Sunday, 11am-10pm (Closed Mondays)
- Services: Dine-in, takeout, delivery (via DoorDash), catering
- Location: 123 Main Street, Downtown

YOUR ROLE:
- Answer questions about the restaurant warmly and professionally
- Help with reservations and general inquiries
- Maintain a friendly, welcoming tone like a restaurant host
- If you don't know something, offer to connect them with staff

TONE: Warm, friendly, professional - like talking to a family friend who runs the restaurant
```

**Example interaction:**
```
[On start]
Bot: Buongiorno! Welcome to Bella's Italian Restaurant. I'm here to help you with reservations, menu questions, or anything else. How can I assist you today?

User: What are your hours?
Bot: We're open Tuesday through Sunday from 11am to 10pm. We're closed on Mondays to give our team a rest. Would you like to make a reservation?
```

---

### 03a_input_guardrails.py
**Purpose:** Protect the business from inappropriate or off-topic requests

**Requirements:**
- Build on script 02
- Implement input validation before sending to LLM:
  1. **Message length check** (min 1 char, max 500 chars)
  2. **Off-topic detection** - use a simple keyword check or quick LLM pre-check
  3. **Inappropriate content filter** - detect profanity, abuse (use simple keyword list)
  4. **Spam pattern detection** - repeated messages, suspicious patterns
- Create a `validate_input()` function that returns (is_valid, error_message)
- If invalid, respond with appropriate message WITHOUT calling main LLM
- Log invalid attempts (use print statements for demo)

**Off-topic keywords to check:**
- politics, weather, sports, medical advice, legal advice, competitor names
- If detected: "I'm here to help with Bella's restaurant. For other topics, I can transfer you to staff."

**Inappropriate content response:**
- "I'm here to provide helpful information about Bella's. Let's keep our conversation respectful."

**Example interaction:**
```
User: What's the weather like?
Bot: I'm here to help with Bella's Italian Restaurant - reservations, menu questions, and more. For weather information, you might want to check a weather service. Can I help you with anything about our restaurant?

User: [Very long message over 500 chars]
Bot: I'd love to help! Could you please ask your question in a shorter message? I work best with concise questions.
```

---

### 03b_output_guardrails.py
**Purpose:** Prevent hallucinations and ensure accurate business information

**Requirements:**
- Build on script 03a
- Enhance system prompt with strict output rules:
  1. **Never make up information** - must say "I don't have that information" if unsure
  2. **Never quote prices** not in the knowledge base
  3. **Never confirm availability** without checking (for now, always say "Let me check our system")
  4. **Escalation triggers** - detect when to hand off to humans
- Create escalation keyword detector
- If escalation needed, provide: "This needs personal attention. Please call us at (555) 123-4567 or I can have a manager call you back. What's your phone number?"

**Escalation Keywords:**
```python
ESCALATION_TRIGGERS = [
    "complaint", "complain", "angry", "upset",
    "refund", "money back",
    "manager", "supervisor", "owner",
    "allergic reaction", "food poisoning", "sick", "ill",
    "legal", "lawyer", "sue",
    "wrong order", "cold food", "undercooked"
]
```

**Enhanced System Prompt Addition:**
```
CRITICAL RULES:
1. If you don't know something, say "I don't have that information. Let me connect you with our staff."
2. Never make up menu items, prices, or policies
3. Never confirm reservations - always say "Let me check our availability"
4. For complaints or serious issues, immediately offer to escalate to a manager
```

**Example interaction:**
```
User: Do you have gluten-free spaghetti carbonara?
Bot: I don't have our complete menu details right now. Let me connect you with our staff who can tell you about all our gluten-free options. Would you like me to have someone call you?

User: I got food poisoning from your restaurant!
Bot: I'm very sorry to hear you're not feeling well. This is important and needs immediate attention from our management team. Please call us right away at (555) 123-4567, or give me your phone number and I'll have a manager call you within the hour.
```

---

### 04a_tools_availability.py
**Purpose:** Add the first business action tool - checking table availability

**Requirements:**
- Build on script 03b
- Implement OpenAI function calling / tools
- Create **one tool only**: `check_availability`
- Tool should:
  - Accept parameters: `date` (string, YYYY-MM-DD), `time` (string, HH:MM), `party_size` (int)
  - Validate inputs (date is future, time is during business hours, party_size 1-20)
  - Return mock response for now: `{"available": true/false, "alternative_times": [...], "message": "..."}`
- Use `@cl.step` decorator to show tool execution in UI
- Agent should conversationally collect missing information if user doesn't provide all parameters

**Mock Implementation Logic:**
```python
def check_availability(date: str, time: str, party_size: int) -> dict:
    # Parse inputs
    # Check if closed on Monday
    # Check if time is within 11am-10pm
    # Mock availability: 
    #   - If party_size > 8: usually unavailable (suggest private room)
    #   - If time is 6pm-8pm (peak): 50% chance unavailable
    #   - Otherwise: usually available
    # Return structured response
```

**Tool Definition Schema:**
```json
{
  "name": "check_availability",
  "description": "Check if a table is available for the requested date, time, and party size",
  "parameters": {
    "type": "object",
    "properties": {
      "date": {
        "type": "string",
        "description": "Date in YYYY-MM-DD format"
      },
      "time": {
        "type": "string", 
        "description": "Time in HH:MM format (24-hour)"
      },
      "party_size": {
        "type": "integer",
        "description": "Number of guests (1-20)"
      }
    },
    "required": ["date", "time", "party_size"]
  }
}
```

**Example interaction:**
```
User: Do you have a table for 4 on Friday?
Bot: I'd be happy to check availability for 4 guests on Friday. What time were you thinking?
User: 7pm
Bot: [calls check_availability tool]
Bot: Great news! We have tables available on Friday at 7pm for 4 guests. Would you like me to make a reservation?
```

---

### 04b_tools_reservation.py
**Purpose:** Add reservation creation tool

**Requirements:**
- Build on script 04a
- Add second tool: `create_reservation`
- Tool should:
  - Accept: `name`, `phone`, `date`, `time`, `party_size`, `special_requests` (optional)
  - Validate phone number format
  - Generate mock confirmation number
  - Return confirmation details
- Multi-turn conversation: Agent should first check availability, then collect reservation details conversationally
- Use `@cl.step` for each tool call
- Show confirmation message with all details

**Tool Definition:**
```python
def create_reservation(
    name: str,
    phone: str, 
    date: str,
    time: str,
    party_size: int,
    special_requests: str = ""
) -> dict:
    # Validate phone (simple regex)
    # Generate confirmation number (e.g., "BELLA-" + random 6 digits)
    # Return structured confirmation
```

**Example interaction:**
```
User: I'd like to make a reservation for 4 people on Friday at 7pm
Bot: [checks availability] Perfect! Friday at 7pm is available for 4 guests. I'll need a few details to complete your reservation. What name should I put this under?
User: John Smith
Bot: Thank you, John. And what's the best phone number to reach you?
User: 555-0123
Bot: [creates reservation]
Bot: Excellent! Your reservation is confirmed:
- Confirmation #: BELLA-847392
- Name: John Smith
- Date: Friday, November 15th
- Time: 7:00 PM
- Party size: 4 guests
- Phone: 555-0123

We'll see you then! If you need to modify or cancel, please call us at (555) 123-4567 with your confirmation number.
```

---

### 04c_tools_menu_business.py
**Purpose:** Add menu and business information tools

**Requirements:**
- Build on script 04b
- Add two more tools:

**Tool 1: `get_menu_info`**
- Parameters: `category` (optional: "appetizers", "pasta", "pizza", "entrees", "desserts", "drinks")
- Returns: Menu items from data/restaurant/menu.json
- Filter by category if provided, otherwise return overview

**Tool 2: `get_business_info`**
- Parameters: `info_type` ("hours", "location", "parking", "dress_code", "catering", "private_events")
- Returns: Specific business information from data/restaurant/business_info.json

**Implementation:**
- Load menu.json and business_info.json at startup
- Tools should search/filter the loaded data
- Use `@cl.step` for visibility

**Example interaction:**
```
User: What pasta dishes do you have?
Bot: [calls get_menu_info with category="pasta"]
Bot: We have several delicious pasta options:

ðŸ Spaghetti Carbonara - $18
House-made pasta with pancetta, eggs, and pecorino romano

ðŸ Linguine alle Vongole - $22  
Fresh clams, white wine, garlic, and parsley

ðŸ Pappardelle Bolognese - $20
Wide ribbon pasta with our slow-cooked meat sauce

Would you like to hear about any dish in detail, or would you like to make a reservation?
```

---

### 05_rag_basic.py
**Purpose:** Add RAG to answer detailed questions from knowledge base

**Requirements:**
- Build on script 04c
- Integrate ChromaDB vector database
- Load and embed documents at startup:
  - data/restaurant/faq.md
  - data/restaurant/catering.md
  - data/restaurant/wine_list.md
- Use sentence-transformers for embeddings (e.g., 'all-MiniLM-L6-v2')
- Implement retrieval function:
  - Query the vector DB with user question
  - Get top 3 relevant chunks
  - Pass as context to LLM
- Add source citations to responses
- Combine RAG with tools: Use tools for actions, RAG for informational queries

**Chunking Strategy:**
- Split markdown by headers (##)
- Max chunk size: 500 tokens
- Keep metadata: source file, section title

**Retrieval Logic:**
```python
def retrieve_context(query: str, n_results: int = 3) -> list:
    # Query vector DB
    # Return chunks with metadata
    # Format for LLM context
```

**System Prompt Addition:**
```
When answering questions, use the retrieved context provided to you.
Always cite your sources by mentioning the document section.
If the retrieved context doesn't contain the answer, use your tools or say you don't know.
```

**Example interaction:**
```
User: Do you do catering for weddings?
Bot: [retrieves from catering.md]
Bot: Yes, we'd love to cater your wedding! We offer several wedding catering packages:

- Full-service catering with servers
- Buffet-style or plated service
- Customizable menus for any size (20-200 guests)
- Includes setup, service, and cleanup

We also provide tastings for wedding parties. I'd recommend speaking with our catering coordinator to discuss your specific needs. Would you like me to have them call you?

(Source: Catering Services - Wedding Packages)
```

---

### 06_final_polished.py
**Purpose:** Production-ready version with all professional touches

**Requirements:**
- Build on script 05
- Add all polish features:

**1. Professional Welcome:**
- Custom avatar (load from assets/bella_logo.png)
- Branded welcome message
- Conversation starters (Chainlit `cl.Action` buttons):
  - "Make a Reservation"
  - "View Menu"
  - "Catering Info"
  - "Hours & Location"

**2. Enhanced UX:**
- Streaming responses with `cl.Message(content="").send()` pattern
- Loading indicators for tool calls
- Formatted responses with emojis (ðŸ, ðŸ“, â°, etc.)
- Error handling with graceful fallback messages

**3. Data Collection:**
- At end of conversation, offer: "Would you like to join our VIP list for special offers?"
- If yes, collect email (validate format)
- Save to simple JSON file (data/leads.json)

**4. Session Management:**
- Store conversation context in `cl.user_session`
- Track: customer_name, phone, reservation_details
- Persist across messages

**5. Monitoring/Logging:**
- Log all tool calls to console
- Log escalations
- Track conversation metrics (message count, tools used)

**6. Configuration:**
- Move all constants to top of file (phone number, address, hours, etc.)
- Easy to customize for different restaurants

**Example Welcome:**
```
[Bella's Logo]

ðŸ‡®ðŸ‡¹ Benvenuti! Welcome to Bella's Italian Restaurant! 

I'm here to help you with:
âœ¨ Reservations
ðŸ Menu questions  
ðŸŽ‰ Catering & events
ðŸ“ Location & hours

What can I do for you today?

[Make a Reservation] [View Menu] [Catering Info] [Contact Us]
```

---

## Sample Data Specifications

### data/restaurant/menu.json
**Format:**
```json
{
  "appetizers": [
    {
      "id": "app001",
      "name": "Bruschetta Classica",
      "description": "Toasted bread with tomatoes, garlic, basil, and extra virgin olive oil",
      "price": 12,
      "vegetarian": true,
      "vegan": false,
      "gluten_free": false,
      "allergens": ["gluten"],
      "popular": true
    }
    // ... 5-6 more appetizers
  ],
  "pasta": [
    {
      "id": "pasta001", 
      "name": "Spaghetti Carbonara",
      "description": "House-made pasta with pancetta, eggs, pecorino romano, and black pepper",
      "price": 18,
      "vegetarian": false,
      "gluten_free": false,
      "allergens": ["gluten", "eggs", "dairy"],
      "popular": true,
      "recommended_wine": "Pinot Grigio"
    }
    // ... 8-10 pasta dishes
  ],
  "pizza": [
    // 6-8 pizzas
  ],
  "entrees": [
    // 8-10 entrees (chicken, veal, seafood)
  ],
  "desserts": [
    // 5-6 desserts
  ],
  "drinks": {
    "wine": [
      // Red, white, sparkling - 10-15 wines
    ],
    "beer": [
      // 5-6 beers
    ],
    "cocktails": [
      // 5-6 cocktails
    ],
    "non_alcoholic": [
      // Sodas, juices, coffee
    ]
  }
}
```

**Requirements:**
- At least 40 total items across all categories
- Mix of popular and regular items
- Include allergen information
- Price range: $10-$35 for entrees
- Include wine pairing recommendations for key dishes

---

### data/restaurant/faq.md
**Content to Include:**
```markdown
# Bella's Italian Restaurant - Frequently Asked Questions

## Hours & Location

### What are your hours?
We're open Tuesday through Sunday from 11:00 AM to 10:00 PM. We're closed on Mondays to give our team a well-deserved rest.

### Where are you located?
123 Main Street, Downtown. We're right across from City Hall, near the public parking garage.

### Is parking available?
Yes! We validate parking for the Main Street Garage (2 hours free with dining). Street parking is also available, and there's a free lot behind our building after 6 PM.

## Reservations

### Do I need a reservation?
While walk-ins are welcome, we highly recommend reservations, especially for Friday and Saturday evenings. You can book online, call us, or use our chat assistant!

### How far in advance can I book?
Up to 60 days in advance. For large parties (8+) or special events, please call us directly.

### What's your cancellation policy?
We understand plans change! Please cancel at least 2 hours before your reservation time. For parties of 8 or more, we require 24-hour notice.

## Dietary Accommodations

### Do you have vegetarian options?
Absolutely! We have many vegetarian pasta dishes, pizzas, and entrees. Just look for the ðŸŒ± symbol on our menu.

### What about vegan options?
Yes, we offer several vegan dishes and can modify many items. Our chefs are happy to accommodate - just let your server know.

### Can you accommodate food allergies?
Yes, we take allergies very seriously. Please inform us of any allergies when you book or when you arrive. Our staff is trained to handle common allergens (gluten, nuts, dairy, shellfish, etc.).

### Do you have gluten-free pasta?
Yes! We offer gluten-free pasta for most of our pasta dishes. We also have gluten-free pizza crust available.

## Dining Options

### Do you offer takeout?
Yes, our full menu is available for takeout. Call ahead or order through our website.

### Do you deliver?
We partner with DoorDash for delivery within a 5-mile radius. You can also pick up curbside.

### Do you have outdoor seating?
Yes! Our patio seats 20 guests and is open weather permitting (April through October).

### Is the restaurant kid-friendly?
Absolutely! We're a family restaurant. We have high chairs, a kids menu, and we love having young guests.

## Special Services

### Do you cater events?
Yes! We cater weddings, corporate events, parties, and more. See our catering menu or contact our events coordinator.

### Can I host a private event?
Yes, our private dining room seats up to 40 guests. We also offer full restaurant buyouts for larger events (up to 120 guests).

### Do you have gift cards?
Yes, available in any denomination. Purchase in-restaurant or online. They never expire!

## Food & Beverage

### Do you make your pasta in-house?
Yes! All our pasta is made fresh daily using traditional Italian techniques and imported Italian flour.

### Where do you source your ingredients?
We source locally whenever possible and import key ingredients (olive oil, tomatoes, cheese) directly from Italy.

### Do you have a full bar?
Yes! We offer an extensive Italian wine list, craft cocktails, Italian beers, and non-alcoholic beverages.

### Can I bring my own wine?
We allow BYOW with a $25 corkage fee per bottle (limit 2 bottles per party).

## Policies

### What's your dress code?
Casual to business casual. We want you to be comfortable, but we ask that guests avoid beachwear or athletic attire at dinner service.

### Are you wheelchair accessible?
Yes, we're fully ADA compliant with wheelchair accessible entrance, restrooms, and seating.

### Do you allow dogs?
Service animals are always welcome. On our patio, well-behaved dogs are welcome (we'll even bring them water!).

## Contact

### How can I reach you?
- Phone: (555) 123-4567
- Email: info@bellasitalian.com  
- Website: www.bellasitalian.com
- Instagram: @bellasitalian

### Who do I contact for catering?
Call our events line: (555) 123-4568 or email catering@bellasitalian.com
```

---

### data/restaurant/catering.md
**Content:**
```markdown
# Catering Services at Bella's Italian Restaurant

## Overview
Bring the authentic taste of Bella's to your next event! We specialize in Italian catering for weddings, corporate events, family gatherings, and special occasions.

## Catering Options

### Drop-Off Catering
Perfect for casual gatherings (10-50 guests)
- Food delivered hot and ready to serve
- Includes serving utensils and basic setup
- Disposable or upgraded serving ware available
- Minimum order: $200

### Buffet Service
Ideal for events of 20-100 guests  
- Full buffet setup with chafing dishes
- Our staff sets up and maintains food stations
- Service staff available for 2-3 hours
- Includes linens and professional presentation
- Minimum order: $500

### Plated Service
Elegant service for weddings and formal events (20-200 guests)
- Full table service with professional waitstaff
- Multi-course meals
- Includes setup, service, and cleanup
- Bartending services available
- Minimum order: $1,500

## Sample Menus

### Italian Feast (Buffet)
$35 per person
- Caesar salad or house salad
- Garlic bread
- Choice of 2 pasta dishes
- Choice of 1 protein (chicken, veal, or salmon)
- Seasonal vegetables
- Tiramisu or cannoli

### Wedding Package (Plated)
Starting at $65 per person
- Passed appetizers during cocktail hour
- Choice of salad or soup
- Artisan bread service
- Choice of 2 entrees (served duet-style or guest's choice)
- Seasonal vegetables and starch
- Wedding cake service
- Coffee and dessert

### Corporate Lunch (Drop-Off)  
$18-25 per person
- Individual boxed lunches OR family-style platters
- Sandwiches, wraps, or pasta
- Side salad
- Dessert
- Beverages

## Add-Ons & Upgrades

### Appetizers (passed or stationed)
- Bruschetta platter - $40 (serves 15-20)
- Antipasto display - $150 (serves 30-40)  
- Caprese skewers - $3.50 per person
- Meatball station - $8 per person

### Beverages
- Soft drinks & water - $2.50 per person
- Coffee service - $3 per person
- Full bar service - $15-25 per person
- Wine service - from $25 per bottle

### Rentals  
- Tables, chairs, linens available
- China & glassware upgrades
- Tent & outdoor equipment

## Planning Your Event

### Timeline
- Book 4-8 weeks in advance for small events
- Book 3-6 months for weddings & large events
- Final guest count due 7 days before event
- Menu tasting available for orders over $2,000

### Delivery & Service Area
- We deliver within 25 miles of our restaurant
- Delivery fee: $50-150 (based on distance & order size)
- Setup fee: $100-300 (based on service level)

### Payment & Policies
- 25% deposit required to book
- Final payment due 3 days before event
- Cancellations: 50% refund if cancelled 14+ days out
- Gratuity: 18% service charge for full-service events

## Contact Our Catering Team
Phone: (555) 123-4568
Email: catering@bellasitalian.com

We'd love to discuss your event! Schedule a consultation to create a custom menu.
```

---

### data/restaurant/wine_list.md
**Content:**
```markdown
# Wine List - Bella's Italian Restaurant

## White Wines

### Pinot Grigio
**Santa Margherita, Alto Adige** - $42 bottle / $12 glass
Crisp, light, with notes of citrus and green apple
*Pairs well with: Seafood pasta, light appetizers*

**Livio Felluga, Friuli** - $38 bottle / $10 glass  
Mineral-driven with white flowers and stone fruit
*Pairs well with: Clams, grilled fish*

### Chardonnay
**Gaja Rossj-Bass, Piedmont** - $65 bottle
Rich, elegant, with notes of butterscotch and oak
*Pairs well with: Chicken, creamy pasta*

### Vermentino
**Argiolas Costamolino, Sardinia** - $35 bottle / $10 glass
Fresh, herbal, Mediterranean character
*Pairs well with: Seafood, light pasta*

### Sauvignon Blanc  
**Pieropan, Veneto** - $40 bottle
Bright acidity, grapefruit and herbs
*Pairs well with: Salads, fresh mozzarella*

## Red Wines

### Chianti
**Castello di Ama, Tuscany** - $48 bottle
Classic Tuscan - cherry, earth, firm tannins
*Pairs well with: Red sauce pasta, pizza*

**Antinori PÃ¨ppoli, Tuscany** - $38 bottle / $11 glass
Bright fruit, medium body, very food-friendly
*Pairs well with: Meat dishes, aged cheese*

### Barbera
**Michele Chiarlo, Piedmont** - $42 bottle
Juicy, low tannin, high acidity
*Pairs well with: Rich meat sauces, osso buco*

### Montepulciano d'Abruzzo
**Masciarelli, Abruzzo** - $32 bottle / $9 glass
Rustic, hearty, dark fruit
*Pairs well with: Lamb, beef, hearty pasta*

### Barolo
**Paolo Scavino, Piedmont** - $95 bottle
The "King of Wines" - powerful, complex, age-worthy
*Pairs well with: Braised meats, truffle dishes*

### Amarone
**Tommasi, Veneto** - $85 bottle  
Rich, full-bodied, dried fruit character
*Pairs well with: Beef, strong cheeses, chocolate desserts*

### Super Tuscan
**Tignanello, Antinori** - $120 bottle
Blend of Sangiovese and Cabernet - bold and elegant
*Pairs well with: Steaks, game meats*

## Sparkling

### Prosecco
**La Marca, Veneto** - $32 bottle / $9 glass
Light, fruity, perfect for celebrations
*Pairs well with: Appetizers, light dishes, or as an aperitif*

**Bisol Crede, Valdobbiadene** - $48 bottle
Premium prosecco - elegant bubbles, crisp finish
*Pairs well with: Seafood, special occasions*

### Franciacorta  
**Bellavista Brut, Lombardy** - $65 bottle
Italy's answer to Champagne - refined, complex
*Pairs well with: Caviar, oysters, celebrations*

## RosÃ©

**Cerasuolo d'Abruzzo, Cataldi Madonna** - $36 bottle / $10 glass
Deep pink, cherry flavors, refreshing
*Pairs well with: Summer dishes, pizza, light pasta*

**Regaleali RosÃ©, Sicily** - $32 bottle / $9 glass  
Crisp, dry, Mediterranean style
*Pairs well with: Seafood, salads, warm weather*

## Dessert Wine

**Vin Santo, Antinori** - $12 glass / $45 half-bottle
Sweet, nutty, perfect with biscotti
*Pairs well with: Tiramisu, almond cookies*

**Moscato d'Asti, La Spinetta** - $38 bottle
Lightly sweet, low alcohol, peachy
*Pairs well with: Fruit desserts, light pastries*

---

*Ask your server for our reserve list and large format bottles*

*Corkage Policy: $25 per bottle (limit 2)*
```

---

### data/restaurant/business_info.json
**Format:**
```json
{
  "basic": {
    "name": "Bella's Italian Restaurant",
    "tagline": "Authentic Italian Cuisine Since 1985",
    "phone": "(555) 123-4567",
    "email": "info@bellasitalian.com",
    "website": "www.bellasitalian.com",
    "address": {
      "street": "123 Main Street",
      "city": "Downtown",
      "state": "CA",
      "zip": "90210"
    }
  },
  "hours": {
    "monday": "Closed",
    "tuesday": "11:00 AM - 10:00 PM",
    "wednesday": "11:00 AM - 10:00 PM",
    "thursday": "11:00 AM - 10:00 PM",
    "friday": "11:00 AM - 11:00 PM",
    "saturday": "10:00 AM - 11:00 PM",
    "sunday": "10:00 AM - 9:00 PM",
    "notes": "Saturday and Sunday brunch: 10:00 AM - 2:00 PM"
  },
  "parking": {
    "validation": true,
    "details": "We validate parking at Main Street Garage (2 hours free). Street parking available. Free lot behind restaurant after 6 PM."
  },
  "dress_code": "Casual to business casual. Please avoid beachwear or athletic attire at dinner.",
  "accessibility": "Fully ADA compliant. Wheelchair accessible entrance, restrooms, and seating available.",
  "reservations": {
    "recommended": true,
    "advance_booking": "Up to 60 days",
    "large_party_minimum": 8,
    "large_party_notice": "Please call for parties of 8 or more",
    "cancellation_policy": "Please cancel at least 2 hours before reservation time. For parties of 8+, 24-hour notice required."
  },
  "services": [
    "Dine-in",
    "Takeout",
    "Delivery (via DoorDash)",
    "Catering",
    "Private events",
    "Outdoor seating (seasonal)"
  ],
  "payment_methods": [
    "Cash",
    "Credit cards (Visa, Mastercard, Amex, Discover)",
    "Apple Pay",
    "Google Pay"
  ],
  "social_media": {
    "instagram": "@bellasitalian",
    "facebook": "/bellasitalian",
    "yelp": "/biz/bellas-italian-restaurant"
  },
  "private_dining": {
    "available": true,
    "capacity": 40,
    "full_buyout_capacity": 120,
    "contact": "events@bellasitalian.com or (555) 123-4568"
  },
  "gift_cards": {
    "available": true,
    "purchase_locations": ["In restaurant", "Online"],
    "expiration": "Never expire"
  },
  "special_features": [
    "House-made pasta daily",
    "Imported Italian ingredients",
    "Extensive Italian wine list",
    "Full bar",
    "Live music Friday & Saturday nights",
    "Cooking classes monthly",
    "Wine tasting events"
  ]
}
```

---

## Utility Scripts

### scripts/utils/setup_vectordb.py
**Purpose:** Initialize and populate ChromaDB with restaurant documents

**Requirements:**
- Read all markdown files from data/restaurant/
- Chunk documents intelligently (by headers, max 500 tokens)
- Generate embeddings using sentence-transformers
- Store in ChromaDB with metadata (source, section, doc_type)
- Save to data/embeddings/
- Print confirmation and stats (total chunks, embedding model used)

**Usage:**
```bash
uv run python scripts/utils/setup_vectordb.py
```

**Output:**
```
Setting up vector database...
âœ“ Loaded faq.md (15 chunks)
âœ“ Loaded catering.md (8 chunks)
âœ“ Loaded wine_list.md (12 chunks)
âœ“ Total: 35 chunks embedded
âœ“ Model: all-MiniLM-L6-v2
âœ“ Saved to: data/embeddings/chroma.db
Done!
```

---

### scripts/utils/test_queries.py
**Purpose:** Automated testing script for workshop validation

**Requirements:**
- Test each progressive script automatically
- Run sample queries and validate responses
- Check that each feature works (tools, guardrails, RAG)
- Provide pass/fail status

**Test Cases to Include:**
```python
TEST_CASES = [
    {
        "script": "01_bare_minimum_chatbot.py",
        "queries": ["Hello", "Tell me about yourself"],
        "expected": "Should respond to basic messages"
    },
    {
        "script": "02_with_system_prompt.py",
        "queries": ["What are your hours?"],
        "expected": "Should mention Tuesday-Sunday, 11am-10pm"
    },
    {
        "script": "03a_input_guardrails.py",
        "queries": ["What's the weather?", "x" * 600],
        "expected": "Should reject off-topic and long messages"
    },
    {
        "script": "03b_output_guardrails.py",
        "queries": ["I got food poisoning!"],
        "expected": "Should escalate to manager"
    },
    {
        "script": "04a_tools_availability.py",
        "queries": ["Do you have a table for 4 on Friday at 7pm?"],
        "expected": "Should call check_availability tool"
    },
    {
        "script": "05_rag_basic.py",
        "queries": ["Do you cater weddings?", "What wine pairs with carbonara?"],
        "expected": "Should retrieve from RAG and cite sources"
    }
]
```

**Usage:**
```bash
uv run python scripts/utils/test_queries.py
```

---

### scripts/utils/validate_setup.py
**Purpose:** Pre-workshop environment checker

**Requirements:**
- Check Python version (>= 3.9)
- Verify uv is installed
- Check all dependencies are installed
- Verify .env file exists and has OPENAI_API_KEY
- Test OpenAI API connection
- Verify all data files exist
- Check ChromaDB is initialized
- Print checklist with âœ“ or âœ—

**Usage:**
```bash
uv run python scripts/utils/validate_setup.py
```

**Output:**
```
Workshop Setup Validation
=========================
âœ“ Python 3.11.5 detected
âœ“ uv package manager installed
âœ“ All dependencies installed
âœ“ .env file found
âœ“ OPENAI_API_KEY configured
âœ“ OpenAI API connection successful
âœ“ Sample data files present:
  âœ“ menu.json
  âœ“ faq.md
  âœ“ catering.md
  âœ“ wine_list.md
  âœ“ business_info.json
âœ“ Vector database initialized (35 chunks)

All checks passed! Ready for workshop. ðŸŽ‰
```

---

## Documentation Files

### docs/WORKSHOP_GUIDE.md
**Content:**
- Workshop overview and learning objectives
- Instructor notes for each section
- Time management tips
- Common issues and troubleshooting
- Talking points for each script
- Questions to ask participants
- Extension ideas if time permits

---

### docs/CLIENT_PITCH_TEMPLATE.md
**Content:**
- One-page pitch template for local businesses
- ROI calculator (hours saved, calls deflected)
- Sample pricing structures:
  - Setup fee: $2,000-5,000
  - Monthly: $200-500 (hosting, maintenance, updates)
  - Per-integration: $500-1,500
- Feature list to present to clients
- Case study template using Bella's example

---

### docs/PRODUCTION_CHECKLIST.md
**Content:**
- Steps to deploy for real clients
- Security considerations (API key management, data privacy)
- Integration options:
  - Booking systems (OpenTable, Resy, Toast)
  - POS systems
  - CRM (HubSpot, Salesforce)
  - Email marketing
- Monitoring and analytics setup
- Legal considerations:
  - Privacy policy
  - Terms of service
  - Data handling
  - GDPR/CCPA compliance
- Scaling considerations
- Backup and disaster recovery

---

## Additional Assets

### assets/bella_logo.png
- Create a simple Italian restaurant logo
- 512x512px PNG with transparent background
- Warm colors (red, green, Italian flag inspired)
- Can be simple: Chef hat, "B" monogram, or fork/knife icon

### assets/conversation_examples.md
- 10-15 realistic conversation flows
- Show successful reservations
- Show escalations
- Show RAG retrievals
- Show tool usage
- Both good and edge cases

---

## README.md Structure

### Content:
```markdown
# Building Customer Support Agents with Chainlit
## Workshop Materials

### Overview
Learn to build production-ready AI customer support agents using Chainlit. Build something you can deploy for clients by the end of this 1.5-hour workshop.

### What You'll Build
A complete customer support agent for "Bella's Italian Restaurant" featuring:
- Natural conversation with business personality
- Input/output guardrails for safety
- Tools for checking availability and making reservations
- RAG for answering detailed questions from documentation
- Professional UI ready for client deployment

### Prerequisites
- Python 3.9+
- OpenAI API key
- Basic Python knowledge
- uv package manager

### Quick Start
1. Clone this repo
2. Install uv: `curl -LsSf https://astral.sh/uv/install.sh | sh`
3. Run setup: `uv sync`
4. Copy `.env.example` to `.env` and add your `OPENAI_API_KEY`
5. Initialize vector DB: `uv run python scripts/utils/setup_vectordb.py`
6. Validate setup: `uv run python scripts/utils/validate_setup.py`
7. Start with script 01: `uv run chainlit run scripts/01_bare_minimum_chatbot.py`

### Workshop Structure
Each script builds on the previous one:
- `01_bare_minimum_chatbot.py` - Basic chat
- `02_with_system_prompt.py` - Add personality
- `03a_input_guardrails.py` - Input validation
- `03b_output_guardrails.py` - Output safety
- `04a_tools_availability.py` - First tool
- `04b_tools_reservation.py` - Multi-step tool
- `04c_tools_menu_business.py` - Information tools
- `05_rag_basic.py` - Knowledge base
- `06_final_polished.py` - Production ready

### Customizing for Your Clients
See `docs/CLIENT_PITCH_TEMPLATE.md` for how to position this to prospects.

This framework works for:
- Restaurants
- Salons & spas
- Medical/dental offices
- Law firms  
- Real estate agencies
- Any local business with FAQs and appointment booking

### Resources
- [Chainlit Documentation](https://docs.chainlit.io)
- [Workshop Guide](docs/WORKSHOP_GUIDE.md)
- [Production Checklist](docs/PRODUCTION_CHECKLIST.md)

### License
MIT
```

---

## Technical Notes for Implementation

### Error Handling
- All scripts should have try/except blocks
- Graceful degradation if API fails
- User-friendly error messages
- Never expose API keys or internal errors to users

### Code Style
- Use type hints
- Clear variable names
- Comments explaining business logic
- Follow PEP 8
- Each script should be runnable standalone

### Testing Approach
- Scripts should work with mock data initially
- Easy to swap mock functions for real integrations
- Include commented-out examples of real integrations

### Configuration
- All business-specific data in constants at top of files
- Easy to find and modify for different businesses
- Clear documentation of what each constant does

---

## Success Criteria

Participants should leave the workshop able to:
1. âœ“ Build a basic Chainlit chatbot (15 min)
2. âœ“ Add personality and context (30 min)
3. âœ“ Implement safety guardrails (45 min)
4. âœ“ Add business tools (1 hour)
5. âœ“ Integrate RAG knowledge base (1.5 hours)
6. âœ“ Have a demo-ready agent they can show prospects

The final agent should:
- Feel natural and on-brand
- Handle common customer requests
- Fail gracefully and escalate appropriately
- Be professional enough to deploy
- Be customizable for different businesses

---

## Deliverables Summary

**For Claude Code to Generate:**
1. âœ“ Complete pyproject.toml with all dependencies
2. âœ“ All 9 progressive Python scripts (01-06)
3. âœ“ 3 utility scripts (setup, test, validate)
4. âœ“ Complete sample data (menu, FAQ, catering, wine, business info)
5. âœ“ 3 documentation files (workshop guide, client pitch, production checklist)
6. âœ“ README with setup instructions
7. âœ“ .env.example template
8. âœ“ Logo asset (or clear spec for designer)
9. âœ“ Example conversations document

**Repository should be:**
- Fully runnable out of the box
- Well documented
- Easy to customize
- Production-quality code
- Ready for workshop delivery
